-- Generated by Mocodo 4.2.12

CREATE TABLE Clients (
  id_Client      INT PRIMARY KEY AUTO_INCREMENT,
  nom            VARCHAR(50),
  prenom         VARCHAR(50),
  adresse        VARCHAR(100),
  date_Naissance DATE,
  idMoniteur     INT,
  codeModele	 INT,
  CONSTRAINT     fk_moniteur FOREIGN KEY (idMoniteur)
	REFERENCES Moniteurs(idMoniteur)
    ON DELETE SET NULL
);

CREATE TABLE Lecons (
  idLecon        INT PRIMARY KEY AUTO_INCREMENT,
  dateExecution  DATE,
  duree          TIME,
  idVoiture     INT NOT NULL,
  idMoniteur    INT NOT NULL,
  idClient      INT NOT NULL,
  codeModele    INT NOT NULL
);

CREATE TABLE Modeles (
  code_Modele        INT PRIMARY KEY AUTO_INCREMENT,
  nom                VARCHAR(30) NOT NULL,
  cylindree          INT,
  puissance_Fiscale  INT,
  type_Boite_Vitesse VARCHAR(10) NOT NULL
);

CREATE TABLE Moniteurs (
  id_Moniteur INT PRIMARY KEY AUTO_INCREMENT,
  nom         VARCHAR(50)
);

CREATE TABLE Voitures (
  idVoiture      INT PRIMARY KEY AUTO_INCREMENT,
  immatriculation VARCHAR(7),
  dateAchat       DATE,
  kilometrage     INT,
  codeModele      INT NOT NULL
  CONSTRAINT     fk_modele FOREIGN KEY (codeModele)
	REFERENCES Modeles(idModele)
    ON DELETE SET NULL
);

ALTER TABLE Clients ADD FOREIGN KEY (id_Moniteur) REFERENCES Moniteurs (id_Moniteur);

ALTER TABLE Lecons ADD FOREIGN KEY (code_Modele) REFERENCES Modeles (code_Modele);
ALTER TABLE Lecons ADD FOREIGN KEY (id_Client) REFERENCES Clients (id_Client);
ALTER TABLE Lecons ADD FOREIGN KEY (id_Moniteur) REFERENCES Moniteurs (id_Moniteur);
ALTER TABLE Lecons ADD FOREIGN KEY (id_Voiture) REFERENCES Voitures (id_Voiture);

ALTER TABLE Voitures ADD FOREIGN KEY (code_Modele) REFERENCES Modeles (code_Modele);
